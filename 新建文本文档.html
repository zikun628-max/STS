<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Swap to Stop Registration Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color: #0f172a;
      background: #f1f5f9;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px 12px;
    }

    .page {
      width: 100%;
      max-width: 900px;
      background: #ffffff;
      border-radius: 20px;
      padding: 24px 20px 28px;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.1);
    }

    @media (min-width: 768px) {
      .page {
        padding: 32px 32px 36px;
      }
    }

    header h1 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    header h1 span.badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid #bae6fd;
      background: #eff6ff;
      color: #0369a1;
      font-weight: 500;
    }

    header p {
      font-size: 14px;
      color: #4b5563;
      line-height: 1.6;
      margin-bottom: 4px;
    }

    header p.small {
      font-size: 12px;
      color: #6b7280;
    }

    .highlight {
      font-weight: 600;
      color: #0369a1;
    }

    .divider {
      margin: 18px 0 16px;
      border-top: 1px dashed #e5e7eb;
    }

    .step-indicator {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
      padding: 0;
    }

    .step-indicator li {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      color: #6b7280;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .step-indicator li::before {
      content: attr(data-step);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 11px;
    }

    .step-indicator li.active {
      background: #eef2ff;
      border-color: #4f46e5;
      color: #312e81;
    }

    .step-indicator li.active::before {
      border-color: #4f46e5;
      background: #4f46e5;
      color: #ffffff;
    }

    .step-indicator li.completed {
      border-style: solid;
      border-color: #22c55e;
      color: #166534;
    }

    .step-indicator li.completed::before {
      content: "✓";
      border-color: #22c55e;
      background: #bbf7d0;
      color: #166534;
      font-size: 12px;
    }

    #form-error {
      display: none;
      margin-bottom: 12px;
      font-size: 13px;
      color: #b91c1c;
      background: #fef2f2;
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid #fecaca;
    }

    form {
      margin-top: 4px;
    }

    .form-step {
      display: none;
    }

    .form-step.active {
      display: block;
    }

    .section-title {
      font-size: 17px;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title span.en {
      font-size: 12px;
      color: #9ca3af;
      font-weight: 400;
    }

    .section-desc {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 12px;
    }

    .question {
      margin-bottom: 14px;
    }

    .question.nested {
      margin-left: 14px;
      padding: 10px 12px;
      border-radius: 10px;
      background: #f9fafb;
      border: 1px dashed #e5e7eb;
    }

    .question p {
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 6px;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 4px;
    }

    .q-number {
      color: #6b7280;
      margin-right: 4px;
    }

    .required {
      color: #dc2626;
      font-size: 12px;
    }

    .helper {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 6px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .options.inline {
      flex-direction: row;
      flex-wrap: wrap;
      gap: 8px 16px;
    }

    .options label {
      font-size: 13px;
      color: #374151;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    input[type="radio"],
    input[type="checkbox"] {
      accent-color: #4f46e5;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .field input,
    .field textarea {
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      padding: 8px 10px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.12s ease, box-shadow 0.12s ease;
    }

    .field input:focus,
    .field textarea:focus {
      border-color: #4f46e5;
      box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.25);
    }

    .field small {
      font-size: 12px;
      color: #9ca3af;
    }

    textarea {
      resize: vertical;
      min-height: 60px;
    }

    .subtle {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 4px;
    }

    .nav-row {
      margin-top: 18px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 14px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.08s ease, box-shadow 0.08s ease,
        background 0.1s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: #4f46e5;
      color: #ffffff;
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 35px rgba(79, 70, 229, 0.35);
    }

    .btn-secondary {
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #e5e7eb;
    }

    .btn-secondary:hover {
      background: #e5e7eb;
    }

    .btn[disabled] {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .hidden {
      display: none !important;
    }

    .message-page {
      text-align: left;
    }

    .message-page h2 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .message-page p {
      font-size: 14px;
      color: #4b5563;
      line-height: 1.7;
      margin-bottom: 8px;
    }

    .message-page .note {
      font-size: 13px;
      color: #6b7280;
    }

    .tagline {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>
        Swap to Stop Registration Form
        <span class="badge">Stop Smoking Service</span>
      </h1>
      <p>
        Welcome to the <span class="highlight">“Swap to Stop”</span> support programme. You have taken an important step.
        This registration should take around 3 minutes. All information will be kept strictly confidential and used by your NHS stop smoking team (GP, pharmacist or SSS advisor) to provide you with the best support.
      </p>
      <p class="small">Questions marked with <span class="required">*</span> are required.</p>
      <div class="tagline">
        This form is for adults who currently smoke and would like support to swap to vaping.
      </div>
    </header>

    <div class="divider"></div>

    <div id="form-wrapper">
      <ol class="step-indicator">
        <li data-step="1" class="active">Eligibility</li>
        <li data-step="2">Contact details</li>
        <li data-step="3">Smoking history</li>
        <li data-step="4">Vaping experience & beliefs</li>
        <li data-step="5">Motivation & next steps</li>
      </ol>

      <div id="form-error"></div>

      <form id="swapForm" novalidate>
        <!-- STEP 1 -->
        <section class="form-step active" data-step-index="0">
          <div class="section-title">
            Section 1: Eligibility Screening
          </div>
          <div class="section-desc">
            This first step makes sure the programme is offered to the right target group.
          </div>

          <div class="question">
            <p>
              <span class="q-number">1.</span> Are you aged 18 years or over?
              <span class="required">*</span>
            </p>
            <div class="options inline">
              <label><input type="radio" name="q1_age" value="yes" /> Yes</label>
              <label><input type="radio" name="q1_age" value="no" /> No</label>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">2.</span>
              Do you currently smoke tobacco (factory-made or hand-rolled cigarettes)?
              <span class="required">*</span>
            </p>
            <div class="options">
              <label><input type="radio" name="q2_smoke" value="daily" /> Yes, I smoke every day</label>
              <label><input type="radio" name="q2_smoke" value="occasional" /> Yes, I smoke some days / occasionally</label>
              <label><input type="radio" name="q2_smoke" value="ex_smoker" /> No, I used to smoke but I have already quit</label>
              <label><input type="radio" name="q2_smoke" value="never_smoked" /> No, I have never smoked</label>
            </div>
            <div class="subtle">
              If you select “No, I have already quit” or “No, I have never smoked”, you will be shown a message as this programme is designed for current smokers.
            </div>
          </div>

          <div class="nav-row">
            <span></span>
            <button type="button" class="btn btn-primary next-btn">
              Next →
            </button>
          </div>
        </section>

        <!-- STEP 2 -->
        <section class="form-step" data-step-index="1">
          <div class="section-title">
            Section 2: Your Contact Details
            <span class="en">(for your local stop smoking service)</span>
          </div>
          <div class="section-desc">
            These details will be used by your SSS team to contact you and arrange your starter kit.
          </div>

          <div class="question">
            <p>
              <span class="q-number">3.</span> Your full name
              <span class="required">*</span>
            </p>
            <div class="field">
              <input type="text" name="full_name" placeholder="Please enter your full name" />
              <small>Please use the name that appears in your NHS records, if applicable.</small>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">4.</span> Your date of birth
              <span class="required">*</span>
            </p>
            <div class="field">
              <input
                type="text"
                name="dob"
                placeholder="DD/MM/YYYY"
                inputmode="numeric"
                pattern="\d{2}/\d{2}/\d{4}"
              />
              <small>For example: 25/12/1985</small>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">5.</span> Your postcode
              <span class="required">*</span>
            </p>
            <div class="field">
              <input type="text" name="postcode" placeholder="e.g. SW1A 1AA" />
              <small>This helps us refer you to your nearest GP or local stop smoking service.</small>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">6.</span> Your preferred phone number
              <span class="required">*</span>
            </p>
            <div class="field">
              <input
                type="tel"
                name="phone"
                placeholder="Please enter your mobile or landline number"
              />
              <small>Your stop smoking advisor will contact you on this number.</small>
            </div>
          </div>

          <div class="nav-row">
            <button type="button" class="btn btn-secondary prev-btn">
              ← Back
            </button>
            <button type="button" class="btn btn-primary next-btn">
              Next →
            </button>
          </div>
        </section>

        <!-- STEP 3 -->
        <section class="form-step" data-step-index="2">
          <div class="section-title">
            Section 3: Understanding Your Smoking
            <span class="en">(Smoking History)</span>
          </div>
          <div class="section-desc">
            These questions help us match you to the most appropriate nicotine strength.
          </div>

          <div class="question">
            <p>
              <span class="q-number">7.</span> On a typical day, how many cigarettes do you smoke?
              <span class="required">*</span>
            </p>
            <div class="options">
              <label><input type="radio" name="q7_cigs" value="1-9" /> 1–9 cigarettes</label>
              <label><input type="radio" name="q7_cigs" value="10-19" /> 10–19 cigarettes</label>
              <label><input type="radio" name="q7_cigs" value="20-29" /> 20–29 cigarettes</label>
              <label><input type="radio" name="q7_cigs" value="30_plus" /> 30 or more cigarettes</label>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">8.</span> How soon after waking do you smoke your first cigarette?
              <span class="required">*</span>
            </p>
            <div class="options">
              <label><input type="radio" name="q8_first" value="0-5" /> Within 5 minutes (high dependence)</label>
              <label><input type="radio" name="q8_first" value="6-30" /> Within 6–30 minutes</label>
              <label><input type="radio" name="q8_first" value="31-60" /> Within 31–60 minutes</label>
              <label><input type="radio" name="q8_first" value="60_plus" /> After 60 minutes (lower dependence)</label>
            </div>
          </div>

          <div class="nav-row">
            <button type="button" class="btn btn-secondary prev-btn">
              ← Back
            </button>
            <button type="button" class="btn btn-primary next-btn">
              Next →
            </button>
          </div>
        </section>

        <!-- STEP 4 -->
        <section class="form-step" data-step-index="3">
          <div class="section-title">
            Section 4: Your Experience and Views on Vaping
            <span class="en">(Intervention-specific questions)</span>
          </div>
          <div class="section-desc">
            This section links to your COM-B assessment. It helps us identify different target groups and establish baseline measures for your SMART goals.
          </div>

          <div class="question">
            <p>
              <span class="q-number">9.</span> Have you used an e-cigarette or vape before?
              <span class="required">*</span>
            </p>
            <div class="options">
              <label>
                <input type="radio" name="q9_vape" value="never" />
                A. No, I have never used an e-cigarette. (→ classified as “Never vaped”)
              </label>
              <label>
                <input type="radio" name="q9_vape" value="ex_vaper" />
                B. Yes, I tried a few times but did not continue. (→ classified as “Ex-vaper”)
              </label>
              <label>
                <input type="radio" name="q9_vape" value="dual" />
                C. Yes, I sometimes vape but mainly smoke cigarettes. (→ classified as “Dual user”)
              </label>
            </div>
          </div>

          <div class="question nested hidden" id="q10-block">
            <p>
              <span class="q-number">10.</span>
              [Only for people who chose 9B] What were the main reasons you stopped using e-cigarettes?
            </p>
            <div class="helper">(You can choose more than one)</div>
            <div class="options">
              <label><input type="checkbox" name="q10_reason" value="experience" /> Poor experience (e.g. coughing, did not like the taste)</label>
              <label><input type="checkbox" name="q10_reason" value="ineffective" /> It did not help – it did not reduce my cravings</label>
              <label><input type="checkbox" name="q10_reason" value="dont_know" /> I did not know how to choose the right device or e-liquid</label>
              <label><input type="checkbox" name="q10_reason" value="safety" /> Concerns about safety</label>
              <label><input type="checkbox" name="q10_reason" value="cost" /> Cost</label>
              <label><input type="checkbox" name="q10_reason" value="other" /> Other</label>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">11.</span>
              Based on what you know at the moment, which of the following best describes your view?
              <span class="required">*</span>
            </p>
            <div class="helper">
              This is the baseline question for SMART goal 1 and measures your beliefs about the relative harms of vaping and smoking.
            </div>
            <div class="options">
              <label><input type="radio" name="q11_harm" value="much_less" /> Vaping is much less harmful than smoking</label>
              <label><input type="radio" name="q11_harm" value="less" /> Vaping is less harmful than smoking</label>
              <label><input type="radio" name="q11_harm" value="similar" /> Vaping and smoking are about as harmful as each other</label>
              <label><input type="radio" name="q11_harm" value="more" /> Vaping is more harmful than smoking</label>
              <label><input type="radio" name="q11_harm" value="much_more" /> Vaping is much more harmful than smoking</label>
              <label><input type="radio" name="q11_harm" value="dont_know" /> I am not sure</label>
            </div>
          </div>

          <div class="nav-row">
            <button type="button" class="btn btn-secondary prev-btn">
              ← Back
            </button>
            <button type="button" class="btn btn-primary next-btn">
              Next →
            </button>
          </div>
        </section>

        <!-- STEP 5 -->
        <section class="form-step" data-step-index="4">
          <div class="section-title">
            Section 5: Your Motivation to Quit
            <span class="en">(Motivation & next steps)</span>
          </div>
          <div class="section-desc">
            These questions link to SMART goal 2 and support DICES-based conversations about change.
          </div>

          <div class="question">
            <p>
              <span class="q-number">12.</span>
              How willing are you to start a quit attempt in the next 30 days?
              <span class="required">*</span>
            </p>
            <div class="options">
              <label>
                <input type="radio" name="q12_motivation" value="5" />
                5 (Very willing) – I would like to set a quit date
              </label>
              <label><input type="radio" name="q12_motivation" value="4" /> 4</label>
              <label>
                <input type="radio" name="q12_motivation" value="3" />
                3 (Neutral)
              </label>
              <label><input type="radio" name="q12_motivation" value="2" /> 2</label>
              <label>
                <input type="radio" name="q12_motivation" value="1" />
                1 (Just looking) – I am not sure yet
              </label>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">13.</span>
              How would you prefer to receive your “Swap to Stop” starter kit and support?
              <span class="required">*</span>
            </p>
            <div class="helper">
              This links directly to the “Who can help you?” section of your poster.
            </div>
            <div class="options">
              <label><input type="radio" name="q13_support" value="gp" /> A. Through my GP practice</label>
              <label><input type="radio" name="q13_support" value="pharmacy" /> B. Through a local pharmacy</label>
              <label><input type="radio" name="q13_support" value="sss" /> C. Through a local stop smoking service (SSS) advisor (phone or in-person)</label>
            </div>
          </div>

          <div class="question">
            <p>
              <span class="q-number">14.</span>
              [Optional] If you already have a preferred GP practice or pharmacy, please write the name here:
            </p>
            <div class="field">
              <textarea
                name="q14_preferred"
                placeholder="For example: XX Medical Centre or XX Pharmacy"
              ></textarea>
            </div>
          </div>

          <div class="nav-row">
            <button type="button" class="btn btn-secondary prev-btn">
              ← Back
            </button>
            <button type="submit" class="btn btn-primary">
              Submit registration ✔
            </button>
          </div>
        </section>
      </form>
    </div>

    <!-- INELIGIBLE PAGE -->
    <div id="ineligible-page" class="message-page hidden">
      <h2>Thank you for your interest</h2>
      <p id="ineligible-text"></p>
      <p class="note">
        If your situation changes in the future, you can contact your local NHS stop smoking service for advice and support at any time.
      </p>
    </div>

    <!-- SUBMISSION SUCCESS PAGE -->
    <div id="submission-page" class="message-page hidden">
      <h2>Thank you for registering!</h2>
      <p>
        Your information has been submitted safely. Your local stop smoking service (SSS) advisor will contact you
        within <strong>2 working days</strong> using the phone number you provided to arrange your first consultation and collection of your free starter kit.
      </p>
      <p>
        You are not alone on your journey to quitting smoking. We are here to support you to swap from smoking to vaping and, in time, to become smoke-free.
      </p>
      <p class="note">
        If your contact details change, please let your local stop smoking service know as soon as possible so they can continue to reach you.
      </p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("swapForm");
      const steps = Array.from(document.querySelectorAll(".form-step"));
      const nextButtons = document.querySelectorAll(".next-btn");
      const prevButtons = document.querySelectorAll(".prev-btn");
      const formError = document.getElementById("form-error");
      const indicatorItems = document.querySelectorAll(".step-indicator li");
      const formWrapper = document.getElementById("form-wrapper");
      const ineligiblePage = document.getElementById("ineligible-page");
      const ineligibleText = document.getElementById("ineligible-text");
      const submissionPage = document.getElementById("submission-page");
      const q10Block = document.getElementById("q10-block");
      let currentStep = 0;

      function showError(message) {
        formError.textContent = message;
        formError.style.display = "block";
      }

      function clearError() {
        formError.textContent = "";
        formError.style.display = "none";
      }

      function showStep(index) {
        steps.forEach((step, i) => {
          step.classList.toggle("active", i === index);
        });
        currentStep = index;
        updateStepIndicator();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function updateStepIndicator() {
        indicatorItems.forEach((item, index) => {
          item.classList.toggle("active", index === currentStep);
          item.classList.toggle("completed", index < currentStep);
        });
      }

      function showIneligible(message) {
        clearError();
        formWrapper.classList.add("hidden");
        ineligibleText.textContent = message;
        ineligiblePage.classList.remove("hidden");
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function validateStep(index) {
        clearError();

        if (index === 0) {
          const q1 = form.elements["q1_age"].value;
          const q2 = form.elements["q2_smoke"].value;

          if (!q1 || !q2) {
            showError("Please answer all questions on this page before continuing.");
            return false;
          }

          if (q1 === "no") {
            showIneligible("This programme is currently only available for adults aged 18 years and over.");
            return false;
          }

          if (q2 === "ex_smoker" || q2 === "never_smoked") {
            showIneligible("Thank you for your interest. This programme is designed for people who currently smoke tobacco.");
            return false;
          }
        } else if (index === 1) {
          const name = form.elements["full_name"].value.trim();
          const dob = form.elements["dob"].value.trim();
          const postcode = form.elements["postcode"].value.trim();
          const phone = form.elements["phone"].value.trim();

          if (!name || !dob || !postcode || !phone) {
            showError("Please complete all required contact details on this page.");
            return false;
          }
        } else if (index === 2) {
          const q7 = form.elements["q7_cigs"].value;
          const q8 = form.elements["q8_first"].value;

          if (!q7 || !q8) {
            showError("Please answer both questions about your smoking pattern before continuing.");
            return false;
          }
        } else if (index === 3) {
          const q9 = form.elements["q9_vape"].value;
          const q11 = form.elements["q11_harm"].value;

          if (!q9) {
            showError("Please tell us whether you have used an e-cigarette before.");
            return false;
          }

          if (q9 === "ex_vaper") {
            const reasons = form.querySelectorAll(
              'input[name="q10_reason"]:checked'
            );
            if (reasons.length === 0) {
              showError(
                "Please select at least one reason why you stopped using e-cigarettes, or go back and change your answer to question 9."
              );
              return false;
            }
          }

          if (!q11) {
            showError(
              "Please complete question 11 so we can understand your views on the harms of vaping compared with smoking."
            );
            return false;
          }
        } else if (index === 4) {
          const q12 = form.elements["q12_motivation"].value;
          const q13 = form.elements["q13_support"].value;

          if (!q12 || !q13) {
            showError("Please answer all required questions on this page before submitting.");
            return false;
          }
        }

        return true;
      }

      nextButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          if (validateStep(currentStep)) {
            if (currentStep < steps.length - 1) {
              showStep(currentStep + 1);
            }
          }
        });
      });

      prevButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          clearError();
          if (currentStep > 0) {
            showStep(currentStep - 1);
          }
        });
      });

      // Show/hide Question 10 (only when 9B = ex-vaper is selected)
      const q9Radios = form.elements["q9_vape"];
      Array.from(q9Radios).forEach((radio) => {
        radio.addEventListener("change", () => {
          if (radio.checked && radio.value === "ex_vaper") {
            q10Block.classList.remove("hidden");
          } else if (radio.checked && radio.value !== "ex_vaper") {
            q10Block.classList.add("hidden");
            const q10Checks = form.querySelectorAll('input[name="q10_reason"]');
            q10Checks.forEach((cb) => {
              cb.checked = false;
            });
          }
        });
      });

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        if (!validateStep(currentStep)) return;

        formWrapper.classList.add("hidden");
        submissionPage.classList.remove("hidden");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      // Initialise first step
      showStep(0);
    });
  </script>
</body>
</html>
